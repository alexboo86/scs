# Руководство по админ-панели

## Доступ к админ-панели

Админ-панель доступна по адресу:
```
http://localhost:8001/api/admin/
```

## Возможности админ-панели

### 1. Управление пользователями

**Просмотр пользователей:**
- Список всех зарегистрированных пользователей
- Информация: ID, Email, Имя, Статус, Дата создания

**Добавление пользователя:**
1. Нажмите кнопку "+ Добавить пользователя"
2. Введите Email и Имя
3. Нажмите "Создать"

**Удаление пользователя:**
- Нажмите кнопку "Удалить" рядом с пользователем
- Подтвердите удаление

### 2. Управление документами

**Просмотр документов:**
- Список всех загруженных документов
- Информация: ID, Название, Тип файла, Количество страниц, Access Token
- Кнопка "Открыть" для просмотра в viewer

### 3. Загрузка документов

**Загрузка нового документа:**
1. Перейдите на вкладку "Загрузка"
2. Выберите файл (PDF, PPT, PPTX)
3. Укажите название (опционально)
4. Нажмите "Загрузить"

После загрузки вы получите:
- ID документа
- Access Token (используйте для предоставления доступа)
- Ссылку на viewer

### 4. Управление доступами

**Предоставление доступа:**
1. Перейдите на вкладку "Доступы"
2. Выберите документ из списка
3. Введите email пользователей (по одному на строку)
4. Нажмите "Предоставить доступ"

**Просмотр пользователей с доступом:**
- После выбора документа отображается список пользователей с доступом
- Показывается дата предоставления доступа

**Отзыв доступа:**
- Нажмите кнопку "Отозвать" рядом с пользователем
- Подтвердите действие

## API Endpoints

Админ-панель использует следующие API endpoints:

- `GET /api/users/` - Список пользователей
- `POST /api/users/` - Создание пользователя
- `DELETE /api/users/{id}` - Удаление пользователя
- `GET /api/documents/` - Список документов
- `POST /api/documents/upload` - Загрузка документа
- `GET /api/admin/documents/{id}/access` - Список пользователей с доступом
- `POST /api/admin/documents/{id}/access` - Предоставление доступа
- `DELETE /api/admin/documents/{id}/access/{email}` - Отзыв доступа

## Примеры использования

### Загрузка документа через API

```bash
curl -X POST http://localhost:8001/api/documents/upload \
  -F "file=@presentation.pdf" \
  -F "name=Моя презентация"
```

### Предоставление доступа через API

```bash
curl -X POST http://localhost:8001/api/admin/documents/1/access \
  -F "user_emails=student@school.com"
```

### Получение списка пользователей с доступом

```bash
curl http://localhost:8001/api/admin/documents/1/access
```

## Безопасность

⚠️ **Важно:**
- Админ-панель не имеет встроенной аутентификации
- В продакшене добавьте защиту (JWT токены, базовая аутентификация)
- Ограничьте доступ к `/api/admin/` только для администраторов

## Рекомендации для продакшена

1. **Добавьте аутентификацию:**
   - JWT токены для админов
   - Проверка прав доступа перед каждым действием

2. **Логирование:**
   - Логируйте все действия администраторов
   - Отслеживайте изменения в доступах

3. **Валидация:**
   - Проверка формата email
   - Проверка существования пользователей перед предоставлением доступа

4. **UI улучшения:**
   - Поиск по пользователям и документам
   - Пагинация для больших списков
   - Экспорт данных
