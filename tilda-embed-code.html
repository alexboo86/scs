<!-- 
    –ö–û–î –î–õ–Ø –í–°–¢–ê–ò–í–ê–ù–ò–Ø –í TILDA
    –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –±–ª–æ–∫ "HTML" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda
-->

<div id="secure-content-viewer"></div>

<script>
(function() {
    // ========== –ù–ê–°–¢–†–û–ô–ö–ò ==========
    const CONFIG = {
        // URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–±–µ–∑ —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ)
        // –ü—Ä–∏–º–µ—Ä: 'https://content.yourschool.com'
        serviceUrl: 'https://your-content-service.com',
        
        // –¢–æ–∫–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–ø–æ–ª—É—á–µ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ API)
        documentToken: 'YOUR_DOCUMENT_ACCESS_TOKEN',
        
        // Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞)
        userEmail: 'user@example.com',
        
        // –í—ã—Å–æ—Ç–∞ viewer (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 100vh –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏)
        height: '100vh'
    };
    
    // ========== –ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–• ==========
    if (!CONFIG.documentToken || CONFIG.documentToken === 'YOUR_DOCUMENT_ACCESS_TOKEN') {
        document.getElementById('secure-content-viewer').innerHTML = 
            '<div style="text-align: center; padding: 50px; color: #d32f2f; font-family: Arial, sans-serif;">' +
            '‚ö†Ô∏è –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å documentToken –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö' +
            '</div>';
        return;
    }
    
    if (!CONFIG.userEmail || CONFIG.userEmail === 'user@example.com') {
        document.getElementById('secure-content-viewer').innerHTML = 
            '<div style="text-align: center; padding: 50px; color: #d32f2f; font-family: Arial, sans-serif;">' +
            '‚ö†Ô∏è –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å userEmail –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö' +
            '</div>';
        return;
    }
    
    // ========== –°–û–ó–î–ê–ù–ò–ï IFRAME ==========
    const container = document.getElementById('secure-content-viewer');
    container.style.cssText = 'width: 100%; height: 100vh; min-height: 600px; margin: 0; padding: 0; background: transparent; border: none;';
    const iframe = document.createElement('iframe');
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º URL –¥–ª—è embed endpoint
    const embedUrl = CONFIG.serviceUrl + 
        '/api/viewer/embed' +
        '?document_token=' + encodeURIComponent(CONFIG.documentToken) +
        '&user_email=' + encodeURIComponent(CONFIG.userEmail);
    
    iframe.src = embedUrl;
    iframe.style.width = '100%';
    iframe.style.height = '100%';
    iframe.style.border = 'none';
    iframe.style.minHeight = '600px';
    iframe.style.margin = '0';
    iframe.style.padding = '0';
    iframe.style.background = 'transparent';
    iframe.setAttribute('allowfullscreen', '');
    iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-popups allow-forms');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    container.innerHTML = 
        '<div style="text-align: center; padding: 50px; color: #666; font-family: Arial, sans-serif;">' +
        'üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞...' +
        '</div>';
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
    iframe.onload = function() {
        container.innerHTML = '';
        container.appendChild(iframe);
    };
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    iframe.onerror = function() {
        container.innerHTML = 
            '<div style="text-align: center; padding: 50px; color: #d32f2f; font-family: Arial, sans-serif;">' +
            '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.' +
            '</div>';
    };
    
    // –î–æ–±–∞–≤–ª—è–µ–º iframe (–Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É)
    container.appendChild(iframe);
    
    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å - –∏—Å–ø–æ–ª—å–∑—É–µ–º 100vh –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–∞
    function adjustHeight() {
        iframe.style.height = '100%';
        container.style.height = '100vh';
    }
    
    window.addEventListener('resize', adjustHeight);
    adjustHeight();
})();
</script>

<!-- 
    –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:
    
    1. –ó–∞–º–µ–Ω–∏—Ç–µ 'YOUR_DOCUMENT_ACCESS_TOKEN' –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞
       (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ API)
    
    2. –ó–∞–º–µ–Ω–∏—Ç–µ 'user@example.com' –Ω–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
       (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
    
    3. –ó–∞–º–µ–Ω–∏—Ç–µ 'https://your-content-service.com' –Ω–∞ URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
    
    4. –í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –±–ª–æ–∫ "HTML" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Tilda
    
    5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω Tilda –¥–æ–±–∞–≤–ª–µ–Ω –≤ ALLOWED_EMBED_DOMAINS
       –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ (.env —Ñ–∞–π–ª)
-->
